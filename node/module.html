<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用的一些模块 | 🌎 🤣 从零开始的前端异世界~</title>
    <meta name="description" content="a frontend note book">
    
    
    <link rel="preload" href="/notebook/assets/css/0.styles.3ed308cc.css" as="style"><link rel="preload" href="/notebook/assets/js/app.ba99c14d.js" as="script"><link rel="preload" href="/notebook/assets/js/2.35fbb34e.js" as="script"><link rel="preload" href="/notebook/assets/js/24.a3da3af9.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.803fbc69.js"><link rel="prefetch" href="/notebook/assets/js/11.558959fa.js"><link rel="prefetch" href="/notebook/assets/js/12.8013364d.js"><link rel="prefetch" href="/notebook/assets/js/13.fc53b13d.js"><link rel="prefetch" href="/notebook/assets/js/14.082aff3a.js"><link rel="prefetch" href="/notebook/assets/js/15.53308a1f.js"><link rel="prefetch" href="/notebook/assets/js/16.49c94e82.js"><link rel="prefetch" href="/notebook/assets/js/17.61425485.js"><link rel="prefetch" href="/notebook/assets/js/18.93c2fdd3.js"><link rel="prefetch" href="/notebook/assets/js/19.653c9e67.js"><link rel="prefetch" href="/notebook/assets/js/20.7ba0578a.js"><link rel="prefetch" href="/notebook/assets/js/21.9149643e.js"><link rel="prefetch" href="/notebook/assets/js/22.71ccb4f2.js"><link rel="prefetch" href="/notebook/assets/js/23.36b1bbbc.js"><link rel="prefetch" href="/notebook/assets/js/25.440868b0.js"><link rel="prefetch" href="/notebook/assets/js/26.f8aab1c5.js"><link rel="prefetch" href="/notebook/assets/js/27.d8c93985.js"><link rel="prefetch" href="/notebook/assets/js/28.d12f3f2d.js"><link rel="prefetch" href="/notebook/assets/js/29.a35f38f5.js"><link rel="prefetch" href="/notebook/assets/js/3.2b640303.js"><link rel="prefetch" href="/notebook/assets/js/4.b71b9750.js"><link rel="prefetch" href="/notebook/assets/js/5.e39810fd.js"><link rel="prefetch" href="/notebook/assets/js/6.49423eaa.js"><link rel="prefetch" href="/notebook/assets/js/7.523412aa.js"><link rel="prefetch" href="/notebook/assets/js/8.adb59610.js"><link rel="prefetch" href="/notebook/assets/js/9.d9c2e66b.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.3ed308cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><!----> <span class="site-name">🌎 🤣 从零开始的前端异世界~</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/html/block.html" class="nav-link">HTML</a></div><div class="nav-item"><a href="/notebook/css/layout/css.html" class="nav-link">CSS</a></div><div class="nav-item"><a href="/notebook/js/javascript.html" class="nav-link">JS</a></div><div class="nav-item"><a href="/notebook/vue/experience.html" class="nav-link">VUE</a></div><div class="nav-item"><a href="/notebook/node/WhatIsNode.js.html" class="nav-link">NODE</a></div><div class="nav-item"><a href="/notebook/http/http.html" class="nav-link">HTTP</a></div><div class="nav-item"><a href="/notebook/eventLoop.html" class="nav-link">EventLoop</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notebook/html/block.html" class="nav-link">HTML</a></div><div class="nav-item"><a href="/notebook/css/layout/css.html" class="nav-link">CSS</a></div><div class="nav-item"><a href="/notebook/js/javascript.html" class="nav-link">JS</a></div><div class="nav-item"><a href="/notebook/vue/experience.html" class="nav-link">VUE</a></div><div class="nav-item"><a href="/notebook/node/WhatIsNode.js.html" class="nav-link">NODE</a></div><div class="nav-item"><a href="/notebook/http/http.html" class="nav-link">HTTP</a></div><div class="nav-item"><a href="/notebook/eventLoop.html" class="nav-link">EventLoop</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/notebook/vue/experience.html" class="sidebar-link">Vue</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/notebook/regExp.html" class="sidebar-link">正则表达式</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Node</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/node/WhatIsNode.js.html" class="sidebar-link">什么是Node.js</a></li><li><a href="/notebook/node/module.html" class="active sidebar-link">常用的一些模块</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/node/module.html#fs-文件系统" class="sidebar-link">fs-文件系统</a></li><li class="sidebar-sub-header"><a href="/notebook/node/module.html#http-协议" class="sidebar-link">http-协议</a></li><li class="sidebar-sub-header"><a href="/notebook/node/module.html#net-网络" class="sidebar-link">net-网络</a></li><li class="sidebar-sub-header"><a href="/notebook/node/module.html#path-路径" class="sidebar-link">path-路径</a></li><li class="sidebar-sub-header"><a href="/notebook/node/module.html#process-进程" class="sidebar-link">process-进程</a></li></ul></li><li><a href="/notebook/node/NPM-Package.html" class="sidebar-link">常见的一些npm包</a></li><li><a href="/notebook/node/EventEmitter.html" class="sidebar-link">事件发射器</a></li><li><a href="/notebook/node/nodeCase.html" class="sidebar-link">Node.js可以做什么？</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Http</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/notebook/eventLoop.html" class="sidebar-link">浏览器事件循环(Event Loop)</a></li><li><a href="/notebook/article.html" class="sidebar-link">站在巨人的肩膀上</a></li><li><a href="/notebook/unresolved.html" class="sidebar-link">未完全解决的需求</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常用的一些模块"><a href="#常用的一些模块" aria-hidden="true" class="header-anchor">#</a> 常用的一些模块</h1> <h2 id="fs-文件系统"><a href="#fs-文件系统" aria-hidden="true" class="header-anchor">#</a> fs-文件系统</h2> <div class="tip custom-block"><p>fs 模块提供了一些接口用于以一种类似标准 POSIX(可移植操作系统接口（Portable Operating System Interface of UNIX，缩写为 POSIX ）) 函数的方式与文件系统进行交互。</p></div> <h3 id="属性和方法"><a href="#属性和方法" aria-hidden="true" class="header-anchor">#</a> 属性和方法</h3> <ol><li><code>fs.readdir(path, callback)</code></li></ol> <div class="tip custom-block"><p>异步读取目录的内容。 回调有两个参数 (err, files)，其中 files 是目录中文件名的数组，不包含 '.' 和 '..'。</p></div> <ol start="2"><li><code>fs.readdirSync(path)</code></li></ol> <div class="tip custom-block"><p>异步读取目录的内容，返回目录中文件名的数组。</p></div> <ol start="3"><li><code>fs.rename(oldPath, newPath, callback)</code></li></ol> <div class="tip custom-block"><p>异步修改文件名。 回调有一个参数 (err)，oldPath， newPath 可以相对路径或绝对路径。
<code>fs.rename</code>不只修改文件名，也能复制移动文件，触发了<code>fs.rename</code>，可改变<code>fs.watch()</code>的事件类型参数。
<code>fs.rename</code>与<code>fs.writeFile</code>不同，不能像<code>fs.writeFile</code>重写文件内容，但<code>fs.writeFile</code>也能做到<code>fs.rename</code>做到的事。
利用<code>fs.readdir()</code>和<code>fs.rename()</code>把名字包含'-'的图片替换成'_':</p></div> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token string">'./icons'</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/_/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">let</span> oldPath <span class="token operator">=</span> src <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> file<span class="token punctuation">,</span>
				newPath <span class="token operator">=</span> src <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/_/g</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newPath'</span><span class="token punctuation">,</span> newPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
			fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span>oldPath<span class="token punctuation">,</span> newPath<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'done!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ol start="4"><li><code>fs.writeFile(file, data, callback)</code></li></ol> <div class="tip custom-block"><p>异步地写入数据到文件，如果文件已经存在，则覆盖文件。 data 可以是字符串或 buffer。callback参数err，file参数可以是路径可以是字符串。</p></div> <ol start="5"><li><code>fs.readFile(path, callback)</code></li></ol> <div class="tip custom-block"><p>异步读取文件，callback有两个参数(err, data), data是Buffer类型，调用<code>toString()</code>即可变成字符串。</p></div> <p>利用<code>fs.readFile()</code>和<code>fs.writeFile()</code>修改文件内容：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 修改index.html文件内容</span>
    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> html</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> tpml <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'second.html'</span><span class="token punctuation">,</span> tpml<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件已经保存'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="6"><li><code>fs.createReadStream(path)</code></li></ol> <div class="tip custom-block"><p>读取流数据。</p></div> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 流数据</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 可以读取json的内容</span>
<span class="token keyword">let</span> stream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'finished chunk:'</span> <span class="token operator">+</span> chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 可以读取js的内容    </span>
<span class="token keyword">let</span> otherStream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./helloWorld.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'other chunk:'</span> <span class="token operator">+</span> chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如何把一张图片流到客户端：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'image/png'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置一个从读取流到写出流的管道</span>
        fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./node.png'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Server running at http://localhost:3000/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="7"><li><code>fs.mkdir(path, callback)</code></li></ol> <div class="tip custom-block"><p>异步地创建目录，callback有一个参数error，但是不能一次生成多层文件夹，需要多次叠加调用。</p></div> <ol start="8"><li><code>fs.mkdirSync(path, callback)</code></li></ol> <div class="tip custom-block"><p>同步地创建目录，callback有一个参数error，同样也不能一次生成多层文件夹，需要多次叠加调用。</p></div> <p>利用<code>fs.mkdirSync()</code>生成多层目录：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">let</span> dir <span class="token operator">=</span> <span class="token string">'./dir/subdir/father/son'</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">mkMutiDir</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> fragments <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        dir<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">subdir<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            fragments <span class="token operator">+=</span> <span class="token string">'/'</span> <span class="token operator">+</span> subdir<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                fragments <span class="token operator">=</span> fragments<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fragments<span class="token punctuation">)</span><span class="token punctuation">;</span>
            fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>fragments<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">,</span> fragments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">mkMutiDir</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="9"><li><code>fs.watch(filname, callback)</code></li></ol> <div class="tip custom-block"><p>监视 filename 的变化，filename 可以是一个文件或一个目录。监听器回调（callback）有两个参数 (eventType, filename)。 eventType 可能是 'rename' 或 'change'，filename 是触发事件的文件的名称。在大多数平台，当目录中一个文件出现或消失时，就会触发 'rename' 事件。fs.watch 的接口不是 100％ 跨平台一致的，且在某些情况下不可用。</p></div> <h2 id="http-协议"><a href="#http-协议" aria-hidden="true" class="header-anchor">#</a> http-协议</h2> <div class="tip custom-block"><p>要使用 HTTP 服务器与客户端，需要 require('http')。</p></div> <h3 id="nodejs搭建简单的web服务器"><a href="#nodejs搭建简单的web服务器" aria-hidden="true" class="header-anchor">#</a> nodejs搭建简单的web服务器</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// get、post都能请求</span>
    <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'ContentType'</span><span class="token punctuation">:</span> <span class="token string">'text/plain'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'HelloWorld\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Server running at http://localhost:3000/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="net-网络"><a href="#net-网络" aria-hidden="true" class="header-anchor">#</a> net-网络</h2> <div class="tip custom-block"><p>net 模块提供了创建基于流的 TCP 或 IPC 服务器(net.createServer())和客户端(net.createConnection()) 的异步网络 API。</p></div> <ol><li><code>net.createServer(callback)</code></li></ol> <div class="tip custom-block"><p>创建一个新的TCP或IPC服务，callback有一个参数socket，可以在回调里面监听socket的一些事件。</p></div> <h2 id="path-路径"><a href="#path-路径" aria-hidden="true" class="header-anchor">#</a> path-路径</h2> <div class="tip custom-block"><p><code>path</code>模块提供了一些工具函数，用于处理文件与目录的路径。</p></div> <h3 id="属性和方法-2"><a href="#属性和方法-2" aria-hidden="true" class="header-anchor">#</a> 属性和方法</h3> <ol><li><code>path.resolve([...paths])</code></li></ol> <div class="tip custom-block"><p>把路径或路径片段的序列从右到左解析成为一个绝对路径（末尾的斜杠会被删除），如果解析后还没生成绝对路径，当前工作目录会被用上。如果不传入path片段,path.resolve()会返回当前工作目录的绝对路径。</p></div> <ol start="2"><li><code>path.join([...paths])</code></li></ol> <div class="tip custom-block"><p>用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是&quot;/&quot;，Windows系统是&quot;&quot;。长度为零的 path 片段会被忽略。 如果连接后的路径字符串是一个长度为零的字符串，则返回 '.'，表示当前工作目录。</p></div> <h2 id="process-进程"><a href="#process-进程" aria-hidden="true" class="header-anchor">#</a> process-进程</h2> <div class="tip custom-block"><p><code>process</code>对象是一个全局变量，它提供当前Node.js进程的有关信息，以及控制当前Node.js进程。因为是全局变量，所以不需要<code>require()</code>。</p></div> <h3 id="属性和方法-3"><a href="#属性和方法-3" aria-hidden="true" class="header-anchor">#</a> 属性和方法</h3> <ol><li><code>process.cwd()</code></li></ol> <div class="tip custom-block"><p>是当前执行node命令时候的文件夹地址 ——工作目录。<code>__dirname</code>: 全局变量，返回当前运行js文件所在的文件夹目录。通常与<code>process.cwd()</code>返回的路径是一样的。</p></div> <ol start="2"><li><code>process.env</code></li></ol> <div class="tip custom-block"><p>返回一个包含用户环境信息的对象。</p></div> <p>可以修改这个对象：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 在命令行输入</span>
    node <span class="token operator">-</span>e <span class="token string">'process.env.foo = &quot;bar&quot;'</span> <span class="token comment">// 但不会生效</span>

    <span class="token comment">// 下面这种方法会生效</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在process.env新增属性会转换成字符串。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// =&gt; 'null'</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// =&gt; 'undefined'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>用<code>delete</code>删除process.env的属性</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在window系统下，环境变量是不区分大小写的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// =&gt; 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p>在vue-cli可以使用process.env来切换开发环境api和测试环境api。</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notebook/node/WhatIsNode.js.html" class="prev">
          什么是Node.js
        </a></span> <span class="next"><a href="/notebook/node/NPM-Package.html">
          常见的一些npm包
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notebook/assets/js/app.ba99c14d.js" defer></script><script src="/notebook/assets/js/2.35fbb34e.js" defer></script><script src="/notebook/assets/js/24.a3da3af9.js" defer></script>
  </body>
</html>
